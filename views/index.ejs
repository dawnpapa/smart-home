<!DOCTYPE html>
<html>

<head>
  <title>My Chart</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
</head>

<body>

  <h1>Smart Home Monitoring</h1>
  <!-- <p>
    <%= JSON.stringify(xy1data[0]) %>
  </p> -->
  <!-- <p>
    <%= y1data[0] %>
  </p> -->
  <div style="position: relative;">
    <canvas id="chart1"></canvas>
    <canvas id="chart2"></canvas>
  </div>
  <!-- <canvas id="Temperature"></canvas> -->
  <script>
    // var ctx = document.getElementById("Temperature").getContext("2d");
    // var myChart = new Chart(ctx, {
    //   type: "line",
    //   data: {
    //     labels: [<%= xdata[0] %>],
    //     datasets: [
    //       {
    //         label: "Sensor Moduel1",
    //         data: [<%= y1data[0] %>]
    //       },
    //      {
    //         label: "Sensor Module2",
    //         data: [<%= y1data[1] %>]
    //       }
    //     ]
    //   },
    //   options: {

    //     scales: {

    //       y: {

    //         beginAtZero: true
    //       }
    //     }
    //   }
    // }); 
    var ctx1 = document.getElementById('chart1').getContext('2d');
    var chart1 = new Chart(ctx1, {
      type: 'line',
      data: {
        labels: [<%= xdata[0] %>],
        datasets: [{
          label: '모듈1 온도',
          data: [<%= y1data[0] %>],
          backgroundColor: 'rgba(255, 99, 132, 0.2)',
          borderColor: 'rgba(255, 99, 132, 1)',
          borderWidth: 1
        },
        // {
        //   label: '모듈 2',
        //   data: [<%= y1data[1] %>],
        //   backgroundColor: 'rgba(54, 162, 235, 0.2)',
        //   borderColor: 'rgba(54, 162, 235, 1)',
        //   borderWidth: 2
        // }
      ]

      },
      options: {
        scales: {
          x: {
            type: 'timeseries'
          },
          y: {
            beginAtZero: true
          }
        }
      }
    });

    var ctx2 = document.getElementById('chart2').getContext('2d');
    var chart2 = new Chart(ctx2, {
      type: 'line',
      data: {
        labels: [<%= xdata[1] %>],
        datasets: [{
          label: '모듈1 습도',
          data: [<%= y2data[1] %>],
          backgroundColor: 'rgba(54, 162, 235, 0.2)',
          borderColor: 'rgba(54, 162, 235, 1)',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          x: {
            type: 'timeseries'
          },
          y: {
            beginAtZero: true
          }
        }
      }
    });

//     Chart.plugins.register({
//     beforeDraw: function(chart) {
//         var ctx = chart.chart.ctx;
//         ctx.save();
//         ctx.globalAlpha = 0.5;
//         chart2.draw();
//         ctx.restore();
//     }
// });
  </script>
</body>

</html>